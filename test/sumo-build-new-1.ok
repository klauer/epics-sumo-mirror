Added module:
{
    "ALARM": {
        "R3-8-patch": {
            "aliases": {
                "BASE": "EPICS_BASE",
                "BSPDEP_TIMER": "TIMER",
                "MISC_DBC": "DBC"
            },
            "dependencies": [
                "BASE",
                "BSPDEP_TIMER",
                "MISC_DBC"
            ],
            "source": {
                "darcs": {
                    "patches": [
                        "/data/repos/support/alarm-3-8-p.patch"
                    ],
                    "tag": "R3-8-modified",
                    "url": "/data/epics/support/alarm/3-8"
                }
            }
        }
    }
}

creating build with tag 'BASE-001'

creating build with tag 'MYAPP-001'

patching file Makefile

directory tree (without darcs, maxdepth 2)
.
./ALARM
./ALARM/R3-8-patch+MYAPP-001
./ALARM/R3-8-patch+MYAPP-001/alarm-3-8-p.patch
./ALARM/R3-8-patch+MYAPP-001/configure
./ALARM/R3-8-patch+MYAPP-001/LICENSE
./ALARM/R3-8-patch+MYAPP-001/Makefile
./BASE
./BASE/R3-14-12-2-1+BASE-001
./BASE/R3-14-12-2-1+BASE-001/configure
./BASE/R3-14-12-2-1+BASE-001/LICENSE
./BASE/R3-14-12-2-1+BASE-001/Makefile
./BASE/R3-14-12-2-1+BASE-001/src
./BSPDEP_CPUBOARDINIT
./BSPDEP_CPUBOARDINIT/R4-1+MYAPP-001
./BSPDEP_CPUBOARDINIT/R4-1+MYAPP-001/configure
./BSPDEP_CPUBOARDINIT/R4-1+MYAPP-001/CVS
./BSPDEP_CPUBOARDINIT/R4-1+MYAPP-001/.cvsignore
./BSPDEP_CPUBOARDINIT/R4-1+MYAPP-001/LICENSE
./BSPDEP_CPUBOARDINIT/R4-1+MYAPP-001/Makefile
./BSPDEP_TIMER
./BSPDEP_TIMER/R6-2+MYAPP-001
./BSPDEP_TIMER/R6-2+MYAPP-001/configure
./BSPDEP_TIMER/R6-2+MYAPP-001/LICENSE
./BSPDEP_TIMER/R6-2+MYAPP-001/Makefile
./BSPDEP_VMETAS
./BSPDEP_VMETAS/TAGLESS-2-1-modified+MYAPP-001
./BSPDEP_VMETAS/TAGLESS-2-1-modified+MYAPP-001/configure
./BSPDEP_VMETAS/TAGLESS-2-1-modified+MYAPP-001/LICENSE
./BSPDEP_VMETAS/TAGLESS-2-1-modified+MYAPP-001/Makefile
./BUILDS.DB
./CSM
./CSM/csm-4-1.tar.gz
./CSM/TAR-4-1+MYAPP-001
./CSM/TAR-4-1+MYAPP-001/configure
./CSM/TAR-4-1+MYAPP-001/LICENSE
./CSM/TAR-4-1+MYAPP-001/Makefile
./DEPS.DB
./EK
./EK/R2-2+MYAPP-001
./EK/R2-2+MYAPP-001/configure
./EK/R2-2+MYAPP-001/LICENSE
./EK/R2-2+MYAPP-001/Makefile
./Makefile-BASE-001
./Makefile-MYAPP-001
./MCAN
./MCAN/R2-6-3-gp+MYAPP-001
./MCAN/R2-6-3-gp+MYAPP-001/configure
./MCAN/R2-6-3-gp+MYAPP-001/LICENSE
./MCAN/R2-6-3-gp+MYAPP-001/Makefile
./MISC_DBC
./MISC_DBC/PATH-3-0+MYAPP-001
./MISC_DBC/PATH-3-0+MYAPP-001/configure
./MISC_DBC/PATH-3-0+MYAPP-001/LICENSE
./MISC_DBC/PATH-3-0+MYAPP-001/Makefile
./MISC_DEBUGMSG
./MISC_DEBUGMSG/R3-0+MYAPP-001
./MISC_DEBUGMSG/R3-0+MYAPP-001/configure
./MISC_DEBUGMSG/R3-0+MYAPP-001/LICENSE
./MISC_DEBUGMSG/R3-0+MYAPP-001/Makefile
./SOFT_DEVHWCLIENT
./SOFT_DEVHWCLIENT/devHwClient-3-0.tar.gz
./SOFT_DEVHWCLIENT/TAR-3-0+MYAPP-001
./SOFT_DEVHWCLIENT/TAR-3-0+MYAPP-001/configure
./SOFT_DEVHWCLIENT/TAR-3-0+MYAPP-001/LICENSE
./SOFT_DEVHWCLIENT/TAR-3-0+MYAPP-001/Makefile
./sumo.config

contents of RELEASE files


FILE: ./ALARM/R3-8-patch+MYAPP-001/configure/RELEASE
# generated by sumo for build MYAPP-001

DBC=mysumo/MISC_DBC/PATH-3-0+MYAPP-001
TIMER=mysumo/BSPDEP_TIMER/R6-2+MYAPP-001
EPICS_BASE=mysumo/BASE/R3-14-12-2-1+BASE-001

FILE: ./BASE/R3-14-12-2-1+BASE-001/configure/RELEASE
#*************************************************************************
# Copyright (c) 2002 The University of Chicago, as Operator of Argonne
#     National Laboratory.
# Copyright (c) 2002 The Regents of the University of California, as
#     Operator of Los Alamos National Laboratory.
# EPICS BASE Versions 3.13.7
# and higher are distributed subject to a Software License Agreement found
# in file LICENSE that is included with this distribution. 
#*************************************************************************
# RELEASE: Define location of external EPICS products

# Define INSTALL_LOCATION in CONFIG_SITE

# VX_DIR definition now in os/CONFIG_SITE.Common.vxWorksCommon
# RTEMS_BASE (and RTEMS_VERSION) now in os/CONFIG_SITE.Common.RTEMS

# NB: Settings in RELEASE files can be overridden in files named
#   RELEASE.$(EPICS_HOST_ARCH).Common
#   RELEASE.Common.$(T_A)
#   RELEASE.$(EPICS_HOST_ARCH).$(T_A)


FILE: ./BSPDEP_CPUBOARDINIT/R4-1+MYAPP-001/configure/RELEASE
# generated by sumo for build MYAPP-001

EPICS_BASE=mysumo/BASE/R3-14-12-2-1+BASE-001

FILE: ./BSPDEP_TIMER/R6-2+MYAPP-001/configure/RELEASE
# generated by sumo for build MYAPP-001

EPICS_BASE=mysumo/BASE/R3-14-12-2-1+BASE-001

FILE: ./BSPDEP_VMETAS/TAGLESS-2-1-modified+MYAPP-001/configure/RELEASE
# generated by sumo for build MYAPP-001

EPICS_BASE=mysumo/BASE/R3-14-12-2-1+BASE-001

FILE: ./CSM/TAR-4-1+MYAPP-001/configure/RELEASE
# generated by sumo for build MYAPP-001

EPICS_BASE=mysumo/BASE/R3-14-12-2-1+BASE-001

FILE: ./EK/R2-2+MYAPP-001/configure/RELEASE
# generated by sumo for build MYAPP-001

MISC=mysumo/MISC_DEBUGMSG/R3-0+MYAPP-001
EPICS_BASE=mysumo/BASE/R3-14-12-2-1+BASE-001

FILE: ./MCAN/R2-6-3-gp+MYAPP-001/configure/RELEASE
# generated by sumo for build MYAPP-001

DEVHWCLIENT=mysumo/SOFT_DEVHWCLIENT/TAR-3-0+MYAPP-001
DEBUGMSG=mysumo/MISC_DEBUGMSG/R3-0+MYAPP-001
ALARM=mysumo/ALARM/R3-8-patch+MYAPP-001
DBC=mysumo/MISC_DBC/PATH-3-0+MYAPP-001
VMETAS=mysumo/BSPDEP_VMETAS/TAGLESS-2-1-modified+MYAPP-001
EPICS_BASE=mysumo/BASE/R3-14-12-2-1+BASE-001

FILE: ./MISC_DBC/PATH-3-0+MYAPP-001/configure/RELEASE
# generated by sumo for build MYAPP-001

EPICS_BASE=mysumo/BASE/R3-14-12-2-1+BASE-001

FILE: ./MISC_DEBUGMSG/R3-0+MYAPP-001/configure/RELEASE
# generated by sumo for build MYAPP-001

EPICS_BASE=mysumo/BASE/R3-14-12-2-1+BASE-001

FILE: ./SOFT_DEVHWCLIENT/TAR-3-0+MYAPP-001/configure/RELEASE
# generated by sumo for build MYAPP-001

EPICS_BASE=mysumo/BASE/R3-14-12-2-1+BASE-001

content of ALARM Makefile:
# mockup EPICS base for sumo tests
VERSION="ALARM:R3-8-patch"

archs= linux-x86  RTEMS-mvme2100  RTEMS-mvme5500  vxWorks-68040  vxWorks-ppc603

mockdirs= dbd include
archdirs= lib

all_generated= $(archdirs) $(mockdirs) MAKESTAMP

all: $(mockdirs) $(archdirs)
	@echo "$(VERSION)" > MAKESTAMP
		
clean:
	@rm -rf $(all_generated)

$(mockdirs): %:
	@mkdir $@
	@echo "dummy" > $@/dummyfile

$(archdirs): %:
	@mkdir $@
	@for a in $(archs); do mkdir -p $@/$$a; done; 


content of BUILDS
{
    "BASE-001": {
        "modules": {
            "BASE": "R3-14-12-2-1"
        },
        "state": "stable"
    },
    "MYAPP-001": {
        "linked": {
            "BASE": "BASE-001"
        },
        "modules": {
            "ALARM": "R3-8-patch",
            "BASE": "R3-14-12-2-1",
            "BSPDEP_CPUBOARDINIT": "R4-1",
            "BSPDEP_TIMER": "R6-2",
            "BSPDEP_VMETAS": "TAGLESS-2-1-modified",
            "CSM": "TAR-4-1",
            "EK": "R2-2",
            "MCAN": "R2-6-3-gp",
            "MISC_DBC": "PATH-3-0",
            "MISC_DEBUGMSG": "R3-0",
            "SOFT_DEVHWCLIENT": "TAR-3-0"
        },
        "state": "testing"
    }
}

content of Makefile-BASE-001
all: BASE/R3-14-12-2-1+BASE-001/stamp-all

clean: BASE/R3-14-12-2-1+BASE-001/stamp-clean

distclean: BASE/R3-14-12-2-1+BASE-001/stamp-distclean


%/stamp-all:
	rm -f $(@D)/stamp-*
	$(MAKE) -C $(@D)
	touch $@

%/stamp-clean:
	rm -f $(@D)/stamp-*
	$(MAKE) -C $(@D) clean
	touch $@

%/stamp-distclean:
	rm -f $(@D)/stamp-*
	$(MAKE) -C $(@D) distclean
	touch $@

content of Makefile-MYAPP-001
all: ALARM/R3-8-patch+MYAPP-001/stamp-all BSPDEP_CPUBOARDINIT/R4-1+MYAPP-001/stamp-all BSPDEP_TIMER/R6-2+MYAPP-001/stamp-all BSPDEP_VMETAS/TAGLESS-2-1-modified+MYAPP-001/stamp-all CSM/TAR-4-1+MYAPP-001/stamp-all EK/R2-2+MYAPP-001/stamp-all MCAN/R2-6-3-gp+MYAPP-001/stamp-all MISC_DBC/PATH-3-0+MYAPP-001/stamp-all MISC_DEBUGMSG/R3-0+MYAPP-001/stamp-all SOFT_DEVHWCLIENT/TAR-3-0+MYAPP-001/stamp-all

clean: ALARM/R3-8-patch+MYAPP-001/stamp-clean BSPDEP_CPUBOARDINIT/R4-1+MYAPP-001/stamp-clean BSPDEP_TIMER/R6-2+MYAPP-001/stamp-clean BSPDEP_VMETAS/TAGLESS-2-1-modified+MYAPP-001/stamp-clean CSM/TAR-4-1+MYAPP-001/stamp-clean EK/R2-2+MYAPP-001/stamp-clean MCAN/R2-6-3-gp+MYAPP-001/stamp-clean MISC_DBC/PATH-3-0+MYAPP-001/stamp-clean MISC_DEBUGMSG/R3-0+MYAPP-001/stamp-clean SOFT_DEVHWCLIENT/TAR-3-0+MYAPP-001/stamp-clean

distclean: ALARM/R3-8-patch+MYAPP-001/stamp-distclean BSPDEP_CPUBOARDINIT/R4-1+MYAPP-001/stamp-distclean BSPDEP_TIMER/R6-2+MYAPP-001/stamp-distclean BSPDEP_VMETAS/TAGLESS-2-1-modified+MYAPP-001/stamp-distclean CSM/TAR-4-1+MYAPP-001/stamp-distclean EK/R2-2+MYAPP-001/stamp-distclean MCAN/R2-6-3-gp+MYAPP-001/stamp-distclean MISC_DBC/PATH-3-0+MYAPP-001/stamp-distclean MISC_DEBUGMSG/R3-0+MYAPP-001/stamp-distclean SOFT_DEVHWCLIENT/TAR-3-0+MYAPP-001/stamp-distclean


ALARM/R3-8-patch+MYAPP-001/stamp-all: BSPDEP_TIMER/R6-2+MYAPP-001/stamp-all MISC_DBC/PATH-3-0+MYAPP-001/stamp-all

EK/R2-2+MYAPP-001/stamp-all: MISC_DEBUGMSG/R3-0+MYAPP-001/stamp-all

MCAN/R2-6-3-gp+MYAPP-001/stamp-all: ALARM/R3-8-patch+MYAPP-001/stamp-all BSPDEP_VMETAS/TAGLESS-2-1-modified+MYAPP-001/stamp-all MISC_DBC/PATH-3-0+MYAPP-001/stamp-all MISC_DEBUGMSG/R3-0+MYAPP-001/stamp-all SOFT_DEVHWCLIENT/TAR-3-0+MYAPP-001/stamp-all

%/stamp-all:
	rm -f $(@D)/stamp-*
	$(MAKE) -C $(@D)
	touch $@

%/stamp-clean:
	rm -f $(@D)/stamp-*
	$(MAKE) -C $(@D) clean
	touch $@

%/stamp-distclean:
	rm -f $(@D)/stamp-*
	$(MAKE) -C $(@D) distclean
	touch $@
